@page "/"
@using Microsoft.AspNetCore.Identity
@using System.Security.Claims
@using System.Globalization
@using Tutel.EduWork.BusinessLayer.Abstractions
@using Tutel.EduWork.BusinessLayer.DTOs
@using Tutel.EduWork.BusinessLayer.Exceptions
@using Tutel.EduWork.Client.Components.Workday;
@using Tutel.EduWork.DataAccessLayer.Entities
<PageTitle>Home</PageTitle>

<AuthorizeView>
    <Authorized>
        <BetterAddWorkday UserId=@userId></BetterAddWorkday>
        <WorkDaysAnalysis UserId=@userId></WorkDaysAnalysis>
    </Authorized>
    <NotAuthorized>
        Niste prijavljeni.
    </NotAuthorized>
</AuthorizeView>

@inject AuthenticationStateProvider authenticationStateProvider;
@code
{
    private string? userId;

    protected override async Task OnInitializedAsync()
    {
        var authState = await authenticationStateProvider.GetAuthenticationStateAsync();
        var user = authState.User;
        userId = user.FindFirstValue(ClaimTypes.NameIdentifier);
    }
}